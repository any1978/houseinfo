<%= form_with(model: @houseinfo, local: true ,url: choose_new_or_edit ) do |form| %>
    <% if @houseinfo.errors.any? %>
      <div id="error_explanation">
        <h2><%= @houseinfo.errors.count %>件のエラーがあります。</h2>
        <ul>
        <% @houseinfo.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="houseinfo_name">
      <%= form.label :物件名 %>
      <%= form.text_field :name %>
    </div>
    <div class="houseinfo_rent">
      <%= form.label :賃料 %>
      <%= form.text_field :rent %>
    </div>

    <div class="houseinfo_address">
      <%= form.label :住所 %>
      <%= form.text_field :address %>
    </div>

    <div class="houseinfo_age">
      <%= form.label :築年数 %>
      <%= form.text_field :age %>
    </div>

    <div class="houseinfo_note">
      <%= form.label :備考欄 %>
      <%= form.text_area :note ,rows: 5 %>
    </div>

    <div>
    <% @houseinfo.nearstations.each_with_index do |nearstation, index| %>
        <%= form.fields_for :nearstations, nearstation do |s| %>
        <h2>最寄り駅<%= index + 1 %></h2>

        <div class="nearstation_routename">
        <%= s.label :路線名 %>
        <%= s.text_field :routename %>
        </div>

        <div class="nearstation_station">
        <%= s.label :駅名 %>
        <%= s.text_field :station %>
        </div>

        <div class="nearstation_minutes">分
        <%= s.label :徒歩分数 %>
        <%= s.text_field :minutes %>
        </div>
        <% end %>
    <% end %>
    </div>
    
    <div class="actions">
      <%= form.submit :submit , class:'btn' %>
    </div>

<% end %>